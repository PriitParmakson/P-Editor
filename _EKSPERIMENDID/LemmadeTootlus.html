<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Lemmade töötlus</title>

  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery.min.js"></script>

  <!-- Material Design icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
    crossorigin="anonymous">
  <!-- Tether on vaja tooltip-de jaoks -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" crossorigin="anonymous"></script>

  <!-- Stiilid -->
  <link rel='stylesheet' href='../css/Samas.css'>

  <!-- Skriptid -->
  <script src='../js/Targifunktsioonid.js'></script>
  <script src='../js/SamatekstiPrimitiivid.js'></script>
  <script>
    var fr;

    function tootleFail(file) {
      fr = new FileReader();
      fr.onload = tootleSaadudAndmed;
      fr.readAsText(file);
    }

    function tootleSaadudAndmed() {
      var s = fr.result;
      // Asenda reavahetused tühikutega
      s = s.replace(/(?:\r\n|\r|\n)/g, ' ');
      // Löö sõnadeks
      var sonad = s.split(' ');
      $('<p></p>')
        .text('Otsing ' + sonad.length.toString() + ' sõnavormist')
        .appendTo('#Tulemus');
      for (var i = 0; i < sonad.length; i++) {
        if (sonad[i].length > 2 && samatekst(sonad[i])) {
          $('<p></p>')
            .text(sonad[i])
            .appendTo('#Tulemus');
        }
      }
    }

    function otsiSonastikust() {
      $('<p></p>')
        .text('Otsing sõnastiku ' + sonastik.length.toString() + ' sõnast')
        .appendTo('#Tulemus');
      for (var i = 0; i < sonastik.length; i++) {
        if (samatekst(sonastik[i])) {
          $('<p></p>')
            .text(sonastik[i])
            .appendTo('#Tulemus');
        }
      }
    }

    function otsiPaareSonastikust() {
      $('<p></p>')
        .text('Pöördsõnapaaride otsing sõnastiku ' + sonastik.length.toString() + ' sõnast')
        .appendTo('#Tulemus');
      var m = new Map();
      for (var i = 0; i < sonastik.length; i++) {
        m.set(sonastik[i].substr(1), sonastik[i]);
      }
      for (var i = 0; i < sonastik.length; i++) {
        var p = pooraYmber(sonastik[i]);
        if (m.get(p)) {
          $('<p></p>')
            .text(sonastik[i] + ' ' + m.get(p) + ' | ')
            .appendTo('#Tulemus');
        };
      }
    }
  </script>

</head>

<body>
  <div class='container-fluid'>
    <div class='row'>
      <div class='col-xs-12 col-sm-10 col-md-8 col-lg-8 col-xl-6'>

        <div class='paan dialoog'>
          <p>Töötle lemmade fail:</p>
          <input type="file" onchange="tootleFail(this.files[0])" />
        </div>

        <div id='Tulemus'></div>

      </div>
    </div>
  </div>

</body>

</html>